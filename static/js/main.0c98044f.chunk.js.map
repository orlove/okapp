{"version":3,"sources":["core/api/app.js","core/api/dash.js","core/api/Api.js","core/stores/AppStore.js","core/stores/mainStore.js","core/helper.js","components/Header.js","components/SimpleModal.js","pages/fields/TypesField.js","pages/fields/PriceField.js","pages/fields/MapField.js","pages/Quiz.js","pages/Done.js","pages/SubscribeView.js","pages/PermissionsReceive.js","pages/Dashboard.js","components/Main.js","App.js","index.js"],"names":["api","begin","gid","handler","request","method","params","apply","fieldValues","userFields","getParams","uid","group_id","JSON","stringify","disable","enable","permissionSet","hashParams","get","permissionGet","dash","updateToken","token","config","sigParams","ps","Object","keys","filter","v","indexOf","map","k","encodeURIComponent","join","updateParams","window","location","search","length","sessionStorage","setItem","substr","getItem","parse","replace","key","value","decodeURIComponent","getHashParams","hash","substring","tag","options","fetch","abort","urlParams","then","response","ok","json","text","console","error","url","catch","post","body","assign","forEach","a","AppStore","inited","city","exists","disabled","Api","OKSDK","REST","call","status","data","log","fieldName","this","defaultValue","undefined","decorate","observable","action","path","full","protocol","hostname","hex","opacity","tempHex","r","parseInt","g","b","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","priceFormatter","Intl","NumberFormat","style","currency","minimumFractionDigits","useStyles","makeStyles","theme","container","display","header","flex","fontSize","fontWeight","adminLink","float","Header","title","admin","classes","history","useHistory","useLocation","className","Typography","variant","gutterBottom","matchPath","pathname","Button","onClick","push","helper","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","top","left","transform","footer","textAlign","SimpleModal","handleClose","Modal","open","onClose","aria-labelledby","aria-describedby","withTheme","inject","STButton","styled","justifyContent","grey","React","useState","getFieldValue","types","setTypes","Grid","item","xs","entries","2","64","128","256","512","4","bit","label","e","event","target","tagName","Number","newTypes","setFieldValue","clickBnts","Checkbox","checked","Boolean","onChange","handleCbs","color","formControl","from","to","state","setState","sequence","concat","formatter","maximumSignificantDigits","handleChange","name","FormControl","Select","inputProps","MenuItem","i","format","backdrop","zIndex","drawer","mapContainer","height","innerHeight","observer","mapIsLoaded","ymaps","rectangle","mapFieldValues","bounds","getBounds","Rectangle","fill","coordRendering","strokeColor","primary","main","strokeWidth","zoom","setBounds","geoObjects","add","events","geometry","setCoordinates","getZoom","center","getCenter","query","load","Backdrop","CircularProgress","instanceRef","onLoad","suppressMapOpenBlock","defaultState","centroid_lat","centroid_lon","marginTop","locationPath","setTitle","handleModalOpen","fields","component","TypesField","exact","PriceField","MapField","curField","find","fieldProps","curIndex","nextField","NextButton","permissionReceive","permissions_granted","getFieldValues","result","permissionListener","widgetMessage","split","object","permissionRequested","setPermissionRequested","addEventListener","removeEventListener","subscribe","Widgets","askGroupAppPermissions","size","Done","align","paragraph","href","tableContainer","paddingBottom","rightBtnContainer","fvs","Table","TableBody","TableRow","TableCell","price","pf","PermissionsReceive","permissionGranted","setPaermissionGranted","permission","setTimeout","close","Dashboard","message","setMessage","access_token","severity","Alert","Main","quizPath","modalData","setModalData","onclose","render","createMuiTheme","contrastText","typography","h1","h2","withStyles","rootContainer","setAdmin","viewer_type","init","app_id","app_key","getCurrentUser","alert","ThemeProvider","stores","mainStore","ReactDOM","document","getElementById","default"],"mappings":"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","file":"static/js/main.0c98044f.chunk.js","sourcesContent":["/**\n *\n */\n\nconst api = {\n  /**\n   * Получение основных данных необходимы для работы приложения\n   * @param {Int} gid ид. группы\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  begin: (gid, handler) => {\n    return api.request({method: 'ok/app/begin', params: {gid: gid}, handler: handler});\n  },\n\n  /**\n   * Подписать/обновить подписку\n   * @param {Object} fieldValues ид. пользвателя\n   * @param {Object} userFields данные текущего пользователя\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  apply: (fieldValues, userFields, handler) => {\n    const params = api.getParams();\n\n    // Ид. пользователя уже передается в параметре logged_user_id\n    delete userFields.uid;\n\n    return api.request({\n        method: 'ok/app/subscribe',\n        params: {\n          gid: params.group_id,\n          userFields: JSON.stringify(userFields),\n          fieldValues: JSON.stringify(fieldValues)\n        },\n        handler: handler\n      });\n  },\n\n  /**\n   * Деактивировать отправку\n   * @param {Int} gid ид. группы\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  disable: (gid, handler) => {\n    return api.request({method: 'ok/app/disable', params: {gid: gid}, handler: handler});\n  },\n\n  /**\n   * Активировать отправку\n   * @param {Int} gid ид. группы\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  enable: (gid, handler) => {\n    return api.request({method: 'ok/app/enable', params: {gid: gid}, handler: handler});\n  },\n\n  /**\n   * Установка получения разрешения\n   * @param {Int} gid ид. группы\n   * @param {String} hashParams\n   */\n  permissionSet: (gid, hashParams) => {\n    return api.request({method: 'ok/app/permission', params: {gid: gid, get: 0, hashParams: hashParams}});\n  },\n\n  /**\n   * Проверка получения разрешения\n   * @param {Int} gid ид. группы\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  permissionGet: (gid, handler) => {\n    return api.request({method: 'ok/app/permission', params: {gid: gid, get: 1}, handler: handler});\n  }\n};\n\nexport default api;\n","/**\n *  Методы панели управления\n */\n\nconst api = {dash: {\n  /**\n   * Обновить токен группы\n   * @param {String} token\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  updateToken: (token, handler) => {\n    const params = api.getParams();\n\n    return api.request({\n        method: 'ok/dash/update-token',\n        params: {\n          gid: params.group_id,\n          token: token\n        },\n        handler: handler\n      });\n  }\n}};\n\nexport default api;\n","/**\n * Работа с сервером\n */\nimport app from './app';\nimport dash from './dash';\n\nconst config = {\n  domain: //window.location.host !== 'orlove.github.io' ? 'https://local.api.hozya.ru' :\n                                                        'https://api.hozya.ru'\n};\n\nvar api = {\n  /**\n   * Параметры проверки подписи\n   * @return {String} logged_user_id=..&session_key=..&auth_sig=..\n   */\n  sigParams: () => {\n    const ps = [\"logged_user_id\", \"session_key\", \"auth_sig\"],\n          params = api.getParams();\n\n    return Object.keys(params)\n      .filter(v => ps.indexOf(v) !== -1)\n      .map((k) => encodeURIComponent(k) + \"=\" + encodeURIComponent(params[k]))\n      .join('&');\n  },\n  /**\n   * Запомнить/обновить url-параметры запуска\n   */\n  updateParams: () => {\n    if(window.location.search.length > 1) {\n      sessionStorage.setItem('launch-parameters', window.location.search.substr(1));\n    }\n  },\n  /**\n   * Получить url-параметры запуска\n   * @return {Object}\n   */\n  getParams: () => {\n    const search = sessionStorage.getItem('launch-parameters') || '';\n\n    if(search.length > 0) {\n      return JSON.parse (\n        '{\"' + search.replace(/&/g, '\",\"').replace(/=/g,'\":\"') + '\"}',\n        (key, value) => key === \"\" ? value : decodeURIComponent(value)\n      );\n    } else {\n      return '';\n    }\n  },\n  /**\n   * Получить hash-параметры запуска\n   * @return {Object}\n   */\n  getHashParams: () => {\n    const search = window.location.hash.substring(1);\n\n    if(search && search.length > 0) {\n      return JSON.parse (\n        '{\"' + search.replace(/&/g, '\",\"').replace(/=/g,'\":\"') + '\"}',\n        (key, value) => key === \"\" ? value : decodeURIComponent(value)\n      );\n    } else {\n      return '';\n    }\n  },\n  /**\n   * Запрос данных с сервера\n   * @param  {String}   method  api-метод\n   * @param  {Object}   params  параметры api-метода\n   * @param  {mix}      tag     ключ запроса (для возможности его отмены)\n   * @param  {Function} handler обработчик ответа в случае успеха\n   * @param  {Object}   options доп. опции http-запроса (заголовки, метод и т.д.)\n   */\n  request: function ({method, params, tag, handler, options}) {\n\n    // Отменяем предыдущий ещё не завершенный запрос\n    if(tag) {\n      fetch.abort(tag);\n    }\n\n    let urlParams = api.sigParams();\n\n    // Преобразуем в url\n    if(params) {\n      params = Object.keys(params).map((k) =>\n          encodeURIComponent(k) + '=' + encodeURIComponent(params[k])\n      ).join('&');\n      urlParams = params + '&' + urlParams;\n    }\n\n    return fetch(config.domain+'/'+method+'?'+urlParams, options, tag)\n      .then((response) => {\n        if(response.ok) {\n          return response.json();\n        } else {\n          response.text().then((text) => {\n            console.error(response.url, text.substr(-64), response);\n          });\n          return false;\n        }\n      })\n      .then(handler)\n      .catch((error) => {\n        console.error(error);\n        //this.setState({error: error, isLoading: false});\n      });\n  },\n  /**\n   * POST-запросы\n   * @param  {String}   method  api-метод\n   * @param  {Object}   body    тело запроса\n   * @param  {Object}   params  параметры api-метода\n   * @param  {mix}      tag     ключ запроса (для возможности его отмены)\n   * @param  {Function} handler обработчик ответа в случае успеха\n   * @param  {Object}   options доп. опции http-запроса (заголовки, метод и т.д.)\n   */\n  post: function ({method, body, params, tag, handler, options}) {\n\n    // Отменяем предыдущий ещё не завершенный запрос\n    if(tag) {\n      fetch.abort(tag);\n    }\n\n    options = Object.assign({\n      method: 'POST',\n      /*headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },*/\n      body: JSON.stringify(body)\n    }, options || {});\n\n    let urlParams = api.sigParams();\n\n    // Преобразуем в url\n    if(params) {\n      params = Object.keys(params).map((k) =>\n          encodeURIComponent(k) + '=' + encodeURIComponent(params[k])\n      ).join('&');\n      urlParams = params + '&' + urlParams;\n    }\n\n    return fetch(config.domain+'/'+method+'?'+urlParams, options, tag)\n      .then((response) => {\n        if(response.ok) {\n          return response.json();\n        } else {\n          response.text().then((text) => {\n            console.error(response.url, text.substr(-64), response);\n          });\n          return false;\n        }\n      })\n      .then(handler)\n      .catch((error) => {\n        console.error(error);\n        //this.setState({error: error, isLoading: false});\n      });\n  },\n  /**\n   * Отменяет запрос с ключем tag\n   * @param {mix} tag ключ запроса\n   */\n  abort: (tag) => {\n    fetch.abort(tag);\n  }\n};\n\n// Сливаем каждый компонент с api\n[app, dash].forEach((a) => {\n  api = Object.assign(a, api);\n});\n\nexport default api;\n","/**\n *\n */\n\nimport { observable, action, decorate } from \"mobx\";\nimport Api from '../api/Api';\n\nclass AppStore {\n\n  /**\n   * Признак инициализированности\n   * @type {Boolean}\n   */\n  inited = false;\n\n  /**\n   * Данные текущего города\n   * @type {Object}\n   */\n  city = null;\n\n  /**\n   * Значения полей фильтра\n   * @type {Object}\n   */\n  fieldValues = {};\n\n  /**\n   * Флаг существования подписки (уже подписан/подписовался)\n   * @type {Boolean}\n   */\n  exists = null;\n\n  /**\n   * Флаг отключенности рассылки\n   * @type {Boolean}\n   */\n  disabled = null;\n\n  /**\n   * Данные пользователя (uid, name)\n   * @type {Object}\n   */\n  userFields = {};\n\n  /**\n   * Получение данных с сервера, необходимы для работы приложения\n   * @param {Int} gid ид. группы\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  begin(gid, handler) {\n    Api.begin(gid, (response) => {\n      this.city = response.city;\n\n      if(response.fieldValues) {\n        this.fieldValues = response.fieldValues;\n      }\n\n      this.exists = response.exists === true;\n\n      this.disabled = response.disabled === true;\n\n      this.inited = true;\n\n      handler(this.exists);\n    });\n  }\n\n  /**\n   * Деактивировать отправку\n   */\n  disable(gid) {\n    const params = Api.getParams();\n\n    Api.disable(params.group_id, (response) => {\n      if(response) {\n        this.disabled = true;\n      }\n    });\n  }\n\n  /**\n   * Активировать отправку\n   */\n  enable(gid) {\n    const params = Api.getParams();\n\n    Api.enable(params.group_id, (response) => {\n      if(response) {\n        this.disabled = false;\n      }\n    });\n  }\n\n  /**\n   * Получает данные пользователя (api Одноклассников)\n   */\n  getCurrentUser() {\n    window.OKSDK.REST.call(\n      'users.getCurrentUser',\n      {\"fields\": \"NAME,PIC190X190\"},\n      (status, data, error) => {\n        if (status === \"ok\") {\n            this.userFields = data;\n        }\n\n        if (status === \"error\") {\n            console.log(\"Error: \" + JSON.stringify(error));\n        }\n      }\n    );\n  }\n\n  /**\n   * Устанавить значение поля\n   * @param {String}  fieldName имя поля\n   * @param {any}     value     значение поля\n   */\n  setFieldValue(fieldName, value) {\n    this.fieldValues[fieldName] = value;\n  }\n\n  /**\n   * Получить значение поля\n   * @param {String}  fieldName     имя поля\n   * @param {any}     defaultValue  значение поля по умолчанию\n   */\n  getFieldValue(fieldName, defaultValue) {\n    if(this.fieldValues[fieldName] !== undefined) {\n      return this.fieldValues[fieldName];\n    } else {\n      return defaultValue;\n    }\n  }\n\n  /**\n   * Получить значение всех полей\n   */\n  getFieldValues() {\n    return this.fieldValues;\n  }\n}\n\ndecorate(AppStore, {\n  disabled: observable,\n  inited: observable,\n  begin: action\n});\n\nexport default AppStore;\n","import AppStore from \"./AppStore\";\n\nclass mainStore {\n  constructor() {\n    /**\n     * Инициализация дочерних хранилищ\n     */\n    this.AppStore = new AppStore();\n  }\n}\n\nexport default new mainStore();\n","/**\n * Вспомогательные фонкции\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\n\nexport default {\n  /**\n   * Дополняет ссылку (добавляя префикс пути и параметры)\n   * @param {String} path\n   * @return {String}\n   */\n  url: (path, full) => {\n    const url = \"/okapp\" + path + window.location.search;\n\n    if(full) {\n      return window.location.protocol+'//'+window.location.hostname + url;\n    } else {\n      return url;\n    }\n  },\n\n  /**\n   * Дополняет ссылку (только параметрами)\n   * @param  {String} path\n   * @return {String}\n   */\n  urlParams: (path) => {\n    return path + window.location.search;\n  },\n\n  /**\n   * Дополняет путь\n   * @param  {String} path\n   * @return {String}\n   */\n  path: (path) => {\n    return \"/okapp\" + path;\n  },\n\n  /**\n   * Добавляет прозрачность к цвету\n   * @param  {String}   hex\n   * @param  {Integer}  opacity 0 - 100\n   * @return {String}\n   */\n  hexToRGBA: (hex, opacity) => {\n    const tempHex = hex.replace('#', '');\n    const r = parseInt(tempHex.substring(0, 2), 16);\n    const g = parseInt(tempHex.substring(2, 4), 16);\n    const b = parseInt(tempHex.substring(4, 6), 16);\n\n    return `rgba(${r},${g},${b},${opacity / 100})`;\n  },\n\n  /**\n   * Интервал который можно использовать в компонентах (может работать с состояниями)\n   * https://overreacted.io/making-setinterval-declarative-with-react-hooks/\n   * @param  {Function} callback [description]\n   * @param  {Number}   delay    [description]\n   * @return {[type]}            [description]\n   */\n  useInterval: (callback, delay) => {\n    const savedCallback = useRef();\n\n    // Remember the latest callback.\n    useEffect(() => {\n      savedCallback.current = callback;\n    }, [callback]);\n\n    // Set up the interval.\n    useEffect(() => {\n      function tick() {\n        savedCallback.current();\n      }\n      if (delay !== null) {\n        let id = setInterval(tick, delay);\n        return () => clearInterval(id);\n      }\n    }, [delay]);\n  }\n};\n\n/**\n * Форматирование цен\n * priceFormatter.format(price)\n * @type {Intl}\n */\nexport const priceFormatter = new Intl.NumberFormat('ru-RU', {\n  style: 'currency',\n  currency: 'RUB',\n  minimumFractionDigits: 0\n});\n","import React from 'react';\nimport { useHistory, useLocation, matchPath } from 'react-router-dom';\nimport helper from '../core/helper';\nimport { Typography, Button } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n\tcontainer: {\n\t\tdisplay: 'flex'\n\t},\n\theader: {\n\t\tflex: 'auto',\n\t\tfontSize: '16px',\n\t\tfontWeight: 'bold'\n\t},\n  adminLink: {\n    float: 'right'\n  }\n}));\n\nconst Header = ({ title, admin }) => {\n\n\tconst classes = useStyles();\n\n\tconst history = useHistory(),\n\t\t\t\tlocation = useLocation();\n\n\treturn (\n\t\t<div className={classes.container}>\n      <Typography variant=\"h1\" gutterBottom className={classes.header}>\n        {title}\n      </Typography>\n\t\t\t{admin && !matchPath(location.pathname, {path: '/*/dashboard'}) && <Button onClick={() => history.push(helper.url(\"/dashboard\"))} className={classes.adminLink}>Админ</Button>}\n\t\t</div>\n\t);\n}\n\nexport default Header;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Modal, Button } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)'\n  },\n  footer: {\n    textAlign: 'right'\n  }\n}));\n\nconst SimpleModal = ({ data, handleClose }) => {\n\n  const classes = useStyles();\n\n  return (\n    <Modal\n      open={data.open}\n      onClose={handleClose}\n      aria-labelledby=\"simple-modal-title\"\n      aria-describedby=\"simple-modal-description\"\n    >\n      <div className={classes.paper}>\n        {data.title && <h2 id=\"simple-modal-title\">{data.title}</h2>}\n        {data.body && <p id=\"simple-modal-description\">\n          {data.body}\n        </p>}\n        <div className={classes.footer}>\n          <Button onClick={handleClose}>ОК</Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default SimpleModal;\n","import React from 'react'\nimport { inject } from 'mobx-react';\nimport { styled, withTheme } from '@material-ui/core/styles';\nimport { Grid, Typography, Button, Checkbox } from '@material-ui/core';\nimport Api from '../../core/api/Api';\n\nconst TypeField = ({ theme, AppStore }) => {\n\n\tconst STButton = styled(Button)({\n\t\t// Кнопки во всю ширену ячеек\n\t  width: '100%',\n\n\t\t// Чекбоксы слева текст по середине\n\t\tjustifyContent: 'left',\n\t\t'& .MuiButton-label__text': {\n\t\t\tdisplay: 'block',\n\t\t\twidth: '100%'\n\t\t},\n\n\t\t// Стиль выбранной кнопки\n\t\t'&.Mui-selected': {\n\t\t\tbackgroundColor: theme.palette.grey[300],\n\t\t\t//color: theme.palette.default.contrastText\n\t\t}\n\t});\n\n\tconst [types, setTypes] = React.useState(AppStore.getFieldValue('types', 0));\n\n  // Обработчик изменения состояния checkbox'ов\n  const handleCbs = (event, bit) => {\n\t\tbit = Number(bit);\n\t\tconst newTypes = types + (types & bit ? -bit : bit);\n    setTypes(newTypes);\n\t\tAppStore.setFieldValue('types', newTypes);\n  };\n\n  // Обработчик клика по кнопке в которой находится checkbox\n\tconst clickBnts = (event, bit) => {\n\t\tif(event.target.tagName !== 'INPUT') {\n\t\t\tbit = Number(bit);\n\t\t\tconst newTypes = types + (types & bit ? -bit : bit);\n\t    setTypes(newTypes);\n\t\t\tAppStore.setFieldValue('types', newTypes);\n\t\t}\n\t};\n\n\tconst typeSet = {2: 'Комнату', 64: '1 комн.', 128: '2 комн.', 256: '3 комн.', 512: '4 комн.+', 4: 'Дом'};\n\n\treturn (\n    <Grid container>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h2\" gutterBottom>Какое жильё ищите?</Typography>\n\t\t\t</Grid>\n      <Grid item xs={12}>\n        <Grid container spacing={2}>\n  \t\t\t\t{Object.entries(typeSet).map(([bit, label]) => (\n            <Grid item xs={6} key={bit}>\n              <STButton variant=\"outlined\" onClick={(e) => clickBnts(e, bit)} className={(types & bit) ? 'Mui-selected' : ''}>\n                <Checkbox checked={Boolean(types & bit)} onChange={(e, v) => handleCbs(e, bit)} color=\"primary\" />\n\t\t\t\t\t\t\t\t<span className=\"MuiButton-label__text\">{label}</span>\n              </STButton>\n            </Grid>\n  \t\t\t\t))}\n        </Grid>\n      </Grid>\n      {/*<Grid item xs={12}>\n        <p style={{overflowWrap: 'break-word'}}>{JSON.stringify(Api.getParams().group_id)}</p>\n      </Grid>*/}\n    </Grid>\n\t);\n}\n\nexport default withTheme(inject(\"AppStore\")(TypeField));\n","import React from 'react'\nimport { inject } from 'mobx-react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Grid, Typography, FormControl, Select, MenuItem } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    //margin: theme.spacing(3),\n  \twidth: '100%'\n  }\n}));\n\nconst PriceField = ({ AppStore }) => {\n\n\tconst classes = useStyles();\n\tconst [state, setState] = React.useState(AppStore.getFieldValue('price', {\n    from: 0,\n\t\tto: 0\n  }));\n\n\tlet sequence = [3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,16000,17000,18000,19000,20000,21000,23000,25000,27000];\n\n\t// В МСК и СПБ цены выше\n\tif(true) {\n\t\tsequence = sequence.concat([30000, 33000, 35000, 37000, 43000, 45000, 47000, 50000, 53000, 55000, 57000]);\n\t}\n\n\tconst formatter = new Intl.NumberFormat('ru-RU', {\n\t  style: 'currency',\n\t  currency: 'rub',\n\t\tmaximumSignificantDigits: 3\n\t});\n\n\tconst handleChange = (event) => {\n    const name = event.target.name;\n    setState({\n      ...state,\n      [name]: event.target.value,\n    });\n  };\n\n  React.useEffect(() => {\n    AppStore.setFieldValue('price', state);\n  }, [state]);\n\n\treturn (\n    <Grid container>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h2\" gutterBottom>Какую цену рассматриваете?</Typography>\n\t\t\t</Grid>\n      <Grid item xs={12}>\n        <Grid container spacing={2}>\n          <Grid item xs={6}>\n\t\t\t\t\t\t<FormControl variant=\"outlined\" className={classes.formControl}>\n\t\t\t\t\t\t\t<Select\n\t\t\t          value={state.from}\n\t\t\t          onChange={handleChange}\n\t\t\t          inputProps={{name: 'from'}}\n\t\t\t        >\n\t\t\t          <MenuItem value=\"0\">От любой</MenuItem>\n\t\t\t\t\t\t\t\t{sequence.filter(v => state.to > v || state.to === 0).map((v, i) => <MenuItem value={v} key={i}>{'От '+formatter.format(v)}</MenuItem>)}\n\t\t\t        </Select>\n\t\t\t\t\t\t</FormControl>\n          </Grid>\n\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t<FormControl variant=\"outlined\" className={classes.formControl}>\n\t\t\t\t\t\t\t<Select\n\t\t\t          value={state.to}\n\t\t\t          onChange={handleChange}\n\t\t\t          inputProps={{name: 'to'}}\n\t\t\t        >\n\t\t\t          <MenuItem value=\"0\">До любой</MenuItem>\n\t\t\t\t\t\t\t\t{sequence.filter(v => state.from < v).map((v, i) => <MenuItem value={v} key={i}>{'До '+formatter.format(v)}</MenuItem>)}\n\t\t\t        </Select>\n\t\t\t\t\t\t</FormControl>\n          </Grid>\n        </Grid>\n      </Grid>\n      {/*<Grid item xs={12}>\n        <p>{JSON.stringify(state)}</p>\n      </Grid>*/}\n    </Grid>\n\t);\n}\n\nexport default inject(\"AppStore\")(PriceField);\n","import React from 'react'\nimport { observer, inject } from 'mobx-react';\nimport helper from '../../core/helper';\nimport { YMaps, Map } from 'react-yandex-maps';\nimport { makeStyles, withTheme } from '@material-ui/core/styles';\nimport { Typography, Backdrop, CircularProgress } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n  mapContainer: {\n    height: (window.innerHeight - 150)+'px',\n    width: '100%'\n  },\n  title: {\n    fontSize: '21px'\n  }\n}));\n\nconst MapField = ({ theme, AppStore }) => {\n\n\tconst [state, setState] = React.useState({\n    mapIsLoaded: false,\n    map: null,\n    ymaps: null,\n    rectangle: null\n  });\n\n  const classes = useStyles();\n\n  React.useEffect(() => {\n    if(state.map && state.ymaps && !state.rectangle) {\n\n      const mapFieldValues = AppStore.getFieldValue('map', {bounds: state.map.getBounds()});\n\n      // Создаем прямоугольник выбранной области\n      const rectangle = new state.ymaps.Rectangle(mapFieldValues.bounds, {}, {\n          fill: false,\n          coordRendering: \"boundsPath\",\n          strokeColor: helper.hexToRGBA(theme.palette.primary.main, 70),\n          strokeWidth: 4\n      });\n\n      if(mapFieldValues.zoom === undefined && mapFieldValues.bounds) {\n        state.map.setBounds(mapFieldValues.bounds);\n      }\n\n      state.map.geoObjects.add(rectangle);\n      setState({...state, rectangle: rectangle});\n\n      // Вешаем отслеживание перемещения\n      state.map.events.add('boundschange', (e) => {\n        const bounds = state.map.getBounds();\n        rectangle.geometry.setCoordinates(bounds);\n        /*document.querySelector('input[name=\"west\"]').value = bounds[0][0];\n        document.querySelector('input[name=\"south\"]').value = bounds[0][1];\n        document.querySelector('input[name=\"east\"]').value = bounds[1][0];\n        document.querySelector('input[name=\"north\"]').value = bounds[1][1];*/\n\n        AppStore.setFieldValue('map', {bounds: bounds, zoom: state.map.getZoom(), center: state.map.getCenter()});\n      });\n    }\n  });\n\n  // Получение объекта карты\n  const instanceRef = (map) => {\n    if(map && !state.map) {\n      setState({...state, map: map});\n    }\n  };\n\n  // Получение объекта для работы с api\n  const handleOnLoad = (ymaps) => {\n    if(ymaps && !state.mapIsLoaded) {\n      setState({...state, mapIsLoaded: true, ymaps: ymaps});\n    }\n  }\n\n\treturn (\n    <YMaps query={{\n      // Подключение нужных модулей\n      load: [\"Rectangle\"]\n    }}>\n      <Backdrop className={classes.backdrop} open={!state.mapIsLoaded}><CircularProgress color=\"inherit\" /></Backdrop>\n      <Typography variant=\"h2\" gutterBottom className={classes.title}>Приблизьте к нужному району</Typography>\n      <Map\n        instanceRef={instanceRef}\n        onLoad={handleOnLoad}\n        options={{\n          // Прячем кнопку \"открыть в яндекс.картах\"\n          suppressMapOpenBlock: true\n        }}\n        defaultState={!AppStore.city.centroid_lat ? {} : {\n          center: AppStore.getFieldValue('map', {}).center || [AppStore.city.centroid_lat, AppStore.city.centroid_lon],\n          zoom: AppStore.getFieldValue('map', {}).zoom || 9\n        }}\n        className={classes.mapContainer}\n      />\n      {/*<p id=\"ere\">{JSON.stringify(AppStore.fieldValues)}</p>*/}\n    </YMaps>\n\t);\n}\n\nexport default withTheme(inject(\"AppStore\")(observer(MapField)));\n","import React, { useEffect } from 'react';\nimport { inject } from 'mobx-react';\nimport { Switch, Route, useHistory, useLocation, matchPath } from 'react-router-dom';\nimport helper from '../core/helper';\nimport { Grid, Button } from '@material-ui/core';\nimport { styled, withTheme, makeStyles } from '@material-ui/core/styles';\nimport Api from '../core/api/Api';\n\nimport TypesField from './fields/TypesField';\nimport PriceField from './fields/PriceField';\nimport MapField from './fields/MapField';\n\nconst useStyles = makeStyles((theme) => ({\n  footer: {\n    marginTop: '20px'\n  }\n}));\n\nconst Quiz = ({ theme, locationPath, setTitle, handleModalOpen, AppStore }) => {\n\n  const classes = useStyles();\n\n\tconst fields = [\n\t\t{component: TypesField, key: 'types', exact: true, path: locationPath},\n\t\t{component: PriceField, key: 'price', path: locationPath + '/price'},\n\t\t{component: MapField, key: 'map', path: locationPath + '/map'}\n\t];\n\n\tconst history = useHistory(),\n\t\t\t\tlocation = useLocation();\n\n\tconst curField = fields.find(fieldProps => matchPath(location.pathname, fieldProps)),\n\t\t\t\tcurIndex = fields.indexOf(curField),\n\t\t\t\tnextField = fields.length - 1 > curIndex ? fields[curIndex + 1] : null;\n\n  useEffect(() => {\n    setTitle((curIndex + 1) + ' из ' + fields.length);\n  }, [curIndex]);\n\n\tconst NextButton = styled(Button)({\n\t\tfloat: 'right'\n\t});\n\n  // Получение разрешения\n  const permissionReceive = (data) => {\n    // Разрешение получено\n    if(data.permissions_granted === 'MESSAGES_FROM_GROUP') {\n      Api.apply(AppStore.getFieldValues(), AppStore.userFields, (result) => {\n        if(result) {\n          if(AppStore.exists) {\n            history.push(helper.url('/view'));\n          } else {\n            history.push(helper.url('/done'));\n          }\n          AppStore.exists = true;\n          AppStore.disabled = false;\n        } else {\n          handleModalOpen(null, 'Вы ничего не поменяли.', () => history.push(helper.url('/view')));\n        }\n      });\n      return true;\n    }\n\n    return false;\n  }\n\n  // Десктопный слушатель\n  const permissionListener = (widgetMessage) => {\n\n    if(typeof widgetMessage.data === 'string' && widgetMessage.data.substring(0, 20) === 'showGroupPermissions') {\n\n      const [, result, object] = widgetMessage.data.split('$');\n\n      if(result === 'ok' && permissionReceive(JSON.parse(object))) {\n        return;\n      }\n\n      // НЕ получено\n      handleModalOpen(null, 'Пожалуйста, дайте разрешения на отправку сообщений, чтобы мы могли прислать вам варианты.');\n    }\n  };\n\n  // Флаг открытости окна запроса разрешения на отправку сообщений\n  const [permissionRequested, setPermissionRequested] = React.useState(false);\n\n  // Слушатель мобильного и нативного режима\n  const permissionListenerStorage = () => {\n    if(permissionRequested) {\n      const params = Api.getParams();\n      Api.permissionGet(params.group_id, (result) => {\n        if(result.get) {\n          permissionReceive(JSON.parse(result.hashParams));\n        }\n      });\n    }\n  }\n\n  // Слушает событие из PermissionsReceive (мобильные)\n  helper.useInterval(permissionListenerStorage, 3000);\n\n  // Десктоп\n  React.useEffect(() => {\n    window.addEventListener('message', permissionListener, false);\n    return () => {\n      window.removeEventListener('message', permissionListener);\n    };\n  }, []);\n\n  // Подписка на отправку подходящих вариантов\n  const subscribe = () => {\n    const params = Api.getParams();\n\n    // Запрос разрешения сообщений от группы доступен только в устаревшем SDK\n    // Ссылка должна отличаться от ссылки на приложение, хотябы url-переменными\n    window.OKSDK.Widgets.askGroupAppPermissions('MESSAGES_FROM_GROUP', helper.url('', true));\n\n    // Начинаем запрашивать рузультат\n    setPermissionRequested(true);\n  };\n\n  // К следующему полю\n  const next = () => {\n    history.push(helper.urlParams(nextField.path))\n  };\n\n\treturn (\n\t\t<div>\n\t\t\t<Switch>\n\t\t\t\t{fields.map(fieldProps => <Route {...fieldProps} />)}\n\t    </Switch>\n\t\t\t<Grid container className={classes.footer}>\n\t\t\t\t<Grid item xs={3}>\n\t\t\t\t\t{curIndex > 0 && <Button size=\"large\" color=\"default\" variant=\"contained\" onClick={() => history.push(helper.urlParams(fields[curIndex-1].path))}>Назад</Button>}\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={9}>\n\t\t\t\t\t{nextField &&\n            <NextButton\n              size=\"large\"\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={next}\n            >\n              Далее\n          </NextButton>}\n\n          {/* Ещё не подписан */}\n          {!nextField && !AppStore.exists &&\n            <NextButton size=\"large\" color=\"primary\" variant=\"contained\" onClick={subscribe}>Прислать объявления от собственников</NextButton>}\n\n          {/* Подписан и подписка активированна */}\n          {!nextField && AppStore.exists && !AppStore.disabled &&\n            <NextButton size=\"large\" color=\"primary\" variant=\"contained\" onClick={subscribe}>ОК</NextButton>}\n\n          {/* Подписан но подписка не активированна */}\n          {!nextField && AppStore.exists && AppStore.disabled &&\n            <NextButton size=\"large\" color=\"primary\" variant=\"contained\" onClick={subscribe}>Применить</NextButton>}\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</div>\n\t);\n}\n\nexport default withTheme(inject(\"AppStore\")(Quiz));\n","import React, { useEffect } from 'react'\nimport { Button, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n\t\tpadding: theme.spacing(2)\n\t}\n}));\n\nconst Done = ({ setTitle }) => {\n\n\tuseEffect(() => {\n\t\tsetTitle('Готово!');\n\t}, []);\n\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t<Typography align=\"justify\" paragraph>\n\t\t\t\tВ течении нескольких минут вам придут объявления от собственников.\n\t\t\t\tСвежие объявления отправляются по мере поступления. Вы не пропустите ни одного!\n\t\t\t</Typography>\n\t\t\t<Button variant=\"contained\" onClick={() => window.location.href = 'https://ok.ru/messages'}>Перейти к сообщениям</Button>\n\t\t</div>\n\t);\n}\n\nexport default Done;\n","import React, { useEffect } from 'react'\nimport { inject, observer } from 'mobx-react';\nimport { useHistory } from 'react-router-dom';\nimport helper from '../core/helper';\nimport { Button, Grid, Table, TableBody, TableCell, TableRow } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { priceFormatter as pf } from '../core/helper';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n\t\tpadding: theme.spacing(2)\n\t},\n  tableContainer: {\n    paddingBottom: theme.spacing(4)\n  },\n  rightBtnContainer: {\n    textAlign: 'right'\n  }\n}));\n\nconst SubscribeView = ({ setTitle, AppStore }) => {\n\n\tuseEffect(() => {\n\t\tsetTitle('Параметры интересующего жилья');\n\t}, []);\n\n\tconst classes = useStyles();\n\n  const history = useHistory();\n\n  const typeSet = {2: 'комната', 64: 'однокомнатная', 128: 'двухкомнатная', 256: 'трёхкомнатная', 512: 'четырехкомнатная+', 4: 'Дом'};\n\n  const fvs = AppStore.getFieldValues();\n\n  /** Остановить отправку */\n  const disable = () => {\n    AppStore.disable();\n  };\n\n  /** Активировать отправку */\n  const enable = () => {\n    AppStore.enable();\n  };\n\n\treturn (\n    <Grid container>\n      <Grid item xs={12} className={classes.tableContainer}>\n        <Table>\n          <TableBody>\n            <TableRow>\n              <TableCell>\n                Тип жилья\n              </TableCell>\n              <TableCell>\n                {Object.entries(typeSet).map(([bit, label]) => fvs.types & bit ? label : null).filter(v => v !== null).join(', ')}\n              </TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>\n                Цена\n              </TableCell>\n              <TableCell>\n                {fvs.price.to > 0 && fvs.price.from > 0 &&\n                  `от ${pf.format(fvs.price.from).substr(0, pf.format(fvs.price.from).length - 1)} до ${pf.format(fvs.price.to)}`}\n                {fvs.price.to === 0 && fvs.price.from > 0 && `от ${pf.format(fvs.price.from)}`}\n                {fvs.price.to > 0 && fvs.price.from === 0 && `до ${pf.format(fvs.price.to)}`}\n              </TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>\n                Местоположение\n              </TableCell>\n              <TableCell>\n                {fvs.map ? 'выбрана область на карте' : 'весь город'}\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </Grid>\n      <Grid item xs={5}>\n        <Button size=\"large\" variant=\"contained\" onClick={() => history.push(helper.url('/quiz'))}>Изменить параметры</Button>\n      </Grid>\n      <Grid item xs={7} className={classes.rightBtnContainer}>\n        {!AppStore.disabled && <Button size=\"large\" variant=\"contained\" onClick={disable}>Остановить отправку вариантов</Button>}\n        {AppStore.disabled && <Button size=\"large\" variant=\"contained\" color=\"primary\" onClick={enable}>Прислать объявления от хозяев</Button>}\n      </Grid>\n    </Grid>\n\t);\n}\n\nexport default inject(\"AppStore\")(observer(SubscribeView));\n","import React, { useEffect } from 'react'\nimport { Button, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Api from '../core/api/Api';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n\t\tpadding: theme.spacing(2)\n\t}\n}));\n\nconst PermissionsReceive = ({ setTitle }) => {\n\n  const [permissionGranted, setPaermissionGranted] = React.useState(null);\n\n\tuseEffect(() => {\n\t\tsetTitle('Получение разрешения');\n\n    const params = Api.getParams(),\n          hashParams = Api.getHashParams();\n\n    if(typeof hashParams.permissions_granted !== 'undefined') {\n      const permission = hashParams.permissions_granted === 'MESSAGES_FROM_GROUP';\n      setPaermissionGranted(permission);\n      if(permission) {\n        setTimeout(() => window.close(), 2000);\n      }\n\n      Api.permissionSet(params.group_id, JSON.stringify(hashParams));\n    }\n\n    else if(typeof hashParams.error !== 'undefined') {\n      setPaermissionGranted(false);\n    }\n\t}, []);\n\n\tconst classes = useStyles();\n\n  if(permissionGranted === null) {\n    return (<div />);\n  } else {\n  \treturn (\n  \t\t<div className={classes.container}>\n  \t\t\t<Typography align=\"justify\" paragraph>\n  \t\t\t\t{permissionGranted ? 'Разрешение получено!' : 'Разрешение не получено. Без разрешения на отправку сообщений вы не сможете получать подходящие варианты жилья. пожалуйста повторите попытку и нажмите «Разрешить».'}\n  \t\t\t</Typography>\n  \t\t\t<Button variant=\"contained\" onClick={() => window.close()}>ОК</Button>\n  \t\t</div>\n  \t);\n  }\n}\n\nexport default PermissionsReceive;\n","import React from 'react';\nimport { Button } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\n\nimport Api from '../core/api/Api';\n\nconst Dashboard = ({ setTitle }) => {\n\n\t// Similar to componentDidMount and componentDidUpdate:\n\tReact.useEffect(() => {\n\t\tsetTitle('Панель управления');\n\t}, []);\n\n\tconst [message, setMessage] = React.useState(false);\n\n\tconst getUpdateToken = () => {\n\t\twindow.OKSDK.Widgets.askGroupAppPermissions('GROUP_BOT_API_TOKEN');\n\t};\n\n\tReact.useEffect(() => {\n    window.addEventListener('message', permissionListener, false);\n    return () => window.removeEventListener('message', permissionListener);\n  }, []);\n\n\t// Получает разрешение/отказ отправки сообщений\n\tconst permissionListener = (widgetMessage) => {\n\t\tif(widgetMessage.data && widgetMessage.data.substring(0, 24) === 'showGroupPermissions$ok$') {\n      const data = JSON.parse(widgetMessage.data.substring(24));\n\n      // Разрешение получено\n      if(data.permissions_granted === 'GROUP_BOT_API_TOKEN') {\n        Api.dash.updateToken(data.access_token, (result) => {\n          if(result.error) {\n\t\t\t\t\t\tsetMessage({severity: 'error', text: result.error});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetMessage({severity: 'success', text: 'Токен успешно обновлён'});\n\t\t\t\t\t}\n        });\n      }\n    }\n  };\n\n\treturn (\n\t\t<div>\n\t\t\t<Button variant=\"contained\" onClick={() => getUpdateToken()}>Получить/обновить токен</Button>\n\t\t\t{message && <Alert severity={message.severity}>{message.text}</Alert>}\n\t\t</div>\n\t);\n}\n\nexport default Dashboard;\n","import React from 'react';\nimport helper from '../core/helper';\nimport { Switch, Route } from 'react-router-dom';\n\nimport SimpleModal from '../components/SimpleModal';\n\nimport Quiz from '../pages/Quiz';\nimport Done from '../pages/Done';\nimport SubscribeView from '../pages/SubscribeView';\nimport PermissionsReceive from '../pages/PermissionsReceive';\nimport Dashboard from '../pages/Dashboard';\n\nconst Main = ({ setTitle, admin }) => {\n\n\tconst quizPath = helper.path('/quiz');\n\n\t// Состояние и методы модального окна\n  const [modalData, setModalData] = React.useState({open: false}),\n\t\t\t\thandleModalOpen = (title, body, onclose) => setModalData({open: true, title: title, body: body, onclose: onclose}),\n\t\t\t\thandleModalClose = () => {\n\t\t\t\t\tif(modalData) {\n\t\t\t\t\t\tmodalData.onclose();\n\t\t\t\t\t}\n\t\t\t\t\tsetModalData({open: false});\n\t\t\t\t};\n\n\treturn (\n\t\t<div>\n\t    <Switch>\n\t      <Route\n\t\t\t\t\tpath={quizPath}\n\t\t\t\t\trender={() => {return <Quiz setTitle={setTitle} locationPath={quizPath} handleModalOpen={handleModalOpen} />}}\n\t\t\t\t/>\n\t\t\t\t<Route path={helper.path('/done')} render={() => {return <Done setTitle={setTitle} />}} />\n\t\t\t\t<Route path={helper.path('/view')} render={() => {return <SubscribeView setTitle={setTitle} />}} />\n\t\t\t\t<Route path={helper.path('/permissions-receive')} render={() => {return <PermissionsReceive setTitle={setTitle} />}} />\n\t\t\t\t{admin && <Route exact path={helper.path('/dashboard')} render={() => {return <Dashboard setTitle={setTitle} />}} />}\n\t    </Switch>\n\t\t\t{/* Модальное окно */}\n\t\t\t<SimpleModal data={modalData} handleClose={handleModalClose} />\n\t\t</div>\n\t);\n}\n\nexport default Main;\n","import React, { useState } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { useHistory, matchPath, useLocation } from 'react-router-dom';\nimport helper from './core/helper';\nimport { Backdrop, CircularProgress } from '@material-ui/core';\nimport { createMuiTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\n\nimport Api from './core/api/Api';\n\nimport Header from './components/Header';\nimport Main from './components/Main';\n\n// Изменение стилей темы\nconst theme = createMuiTheme({\n  // Основные цвета\n  palette: {\n    primary: {\n\t\t\tmain: '#ee8208',\n\t\t\tcontrastText: '#fff'\n\t\t}\n  },\n  // Оформление текста\n  typography: {\n    h1: {\n      fontSize: '28px'\n    },\n    h2: {\n      fontSize: '24px'\n    }\n  }\n});\n\nconst styles = (theme) => {\n  return {\n    rootContainer: {\n      padding: '8px'\n    },\n    backdrop: {\n      zIndex: theme.zIndex.drawer + 1,\n      color: '#fff',\n    }\n  }\n};\n\nconst App = ({ AppStore, classes }) => {\n\n  const history = useHistory(),\n        location = useLocation();\n\n\tconst [title, setTitle] = useState(null);\n\n  // Признак администратора группы\n  const [admin, setAdmin] = React.useState(false);\n\tReact.useEffect(() => {\n\t\tif(Api.getParams().viewer_type === 'ADMIN') {\n\t\t\tsetAdmin(true);\n\t\t}\n\t}, []);\n\n  React.useEffect(() => {\n    // Запоминаем пераметры запуска приложения\n\t\tApi.updateParams();\n\n    const params = Api.getParams(),\n          hashParams = Api.getHashParams();\n\n    // Задан hash-параметр permissions_granted или error, отменяем дальнейшие действия\n    if(hashParams.permissions_granted || hashParams.error) {\n\n      // Пришло разрешение/отказ от виджета\n      if(matchPath(location.pathname, {path: helper.path('/permissions-receive')})){\n        // Ответим инициализацию чтобы исчез прелоадер\n        AppStore.inited = true;\n      }\n      // Переходим к странице обработки получения разрешения от виджета\n      // Напрямую нельзя (пришлось бы создавать вайл public/permissions-receive.html)\n      else {\n        AppStore.inited = true;\n        history.push(helper.url('/permissions-receive')+window.location.hash);\n      }\n\n      return;\n    }\n\n\t\t// Получение данных с сервера, необходимы для работы приложения\n\t\tAppStore.begin(params.group_id, (exists) => {\n      // Если пудписка уже существует\n      if(exists) {\n        // Переходим к просмотру\n        history.push(helper.url('/view'));\n      }\n      // Подписки ещё нет\n      else {\n        // Переходим к форме\n        history.push(helper.url('/quiz'));\n      }\n    });\n\n     // Инициализация API\n     window.OKSDK.init(\n       {app_id: 512000691802, app_key: 'CLFPIPJGDIHBABABA'},\n       // Success\n       () => {\n         // Получает данные пользователя (api Одноклассников)\n         AppStore.getCurrentUser();\n       },\n       // Error\n       (error) => alert(\"Ошибка инициализации SDK\")\n     );\n  }, []);\n\n\treturn (\n\t\t<ThemeProvider theme={theme}>\n      <Backdrop className={classes.backdrop} open={!AppStore.inited}><CircularProgress color=\"inherit\" /></Backdrop>\n      {AppStore.inited && <div className={classes.rootContainer}>\n  \t\t\t<Header title={title} admin={admin} />\n  \t    <Main setTitle={setTitle} admin={admin} />\n      </div>}\n\t\t</ThemeProvider>\n\t);\n}\n\nexport default withStyles(styles)(inject(\"AppStore\")(observer(App)));\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from \"mobx-react\";\nimport mainStore from './core/stores/mainStore';\nimport App from \"./App\";\nimport Api from \"./core/api/Api\";\n\nconst stores = {\n    mainStore,\n    AppStore : mainStore.AppStore\n};\n\nReactDOM.render(\n  <Provider {...stores}>\n    <BrowserRouter>\n      <App/>\n    </BrowserRouter>\n  </Provider>, document.getElementById(\"root\"));\n\nconst params = Api.getParams();\n\nif (process.env.NODE_ENV === \"development\" || params.group_id === \"52946589384915\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}