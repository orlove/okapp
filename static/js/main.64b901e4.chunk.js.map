{"version":3,"sources":["core/api/app.js","core/api/dash.js","core/api/Api.js","core/stores/AppStore.js","core/stores/mainStore.js","core/helper.js","components/Header.js","components/SimpleModal.js","pages/fields/TypesField.js","pages/fields/PriceField.js","pages/fields/MapField.js","pages/Quiz.js","pages/Done.js","pages/SubscribeView.js","pages/Dashboard.js","components/Main.js","App.js","index.js"],"names":["api","begin","gid","handler","request","method","params","apply","fieldValues","userFields","getParams","uid","group_id","JSON","stringify","disable","enable","dash","updateToken","token","config","window","location","host","sigParams","ps","Object","keys","filter","v","indexOf","map","k","encodeURIComponent","join","updateParams","search","length","sessionStorage","setItem","substr","getItem","parse","replace","key","value","decodeURIComponent","tag","options","fetch","abort","urlParams","then","response","ok","json","text","console","error","url","catch","post","body","assign","app","forEach","a","AppStore","inited","city","exists","disabled","Api","OKSDK","REST","call","status","data","log","fieldName","this","defaultValue","undefined","decorate","observable","action","path","hex","opacity","tempHex","r","parseInt","substring","g","b","priceFormatter","Intl","NumberFormat","style","currency","minimumFractionDigits","useStyles","makeStyles","theme","container","display","header","flex","adminLink","float","Header","title","admin","classes","history","useHistory","useLocation","className","Typography","variant","gutterBottom","matchPath","pathname","Button","onClick","push","helper","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","top","left","transform","footer","textAlign","SimpleModal","handleClose","Modal","open","onClose","aria-labelledby","aria-describedby","id","withTheme","inject","STButton","styled","justifyContent","grey","React","useState","getFieldValue","types","setTypes","Grid","item","xs","entries","2","64","128","256","512","4","bit","label","e","event","target","tagName","Number","newTypes","setFieldValue","clickBnts","Checkbox","checked","onChange","handleCbs","color","formControl","from","to","state","setState","sequence","concat","formatter","maximumSignificantDigits","handleChange","name","useEffect","FormControl","Select","inputProps","MenuItem","i","format","backdrop","zIndex","drawer","mapContainer","height","innerHeight","observer","mapIsLoaded","ymaps","rectangle","mapFieldValues","bounds","getBounds","Rectangle","fill","coordRendering","strokeColor","primary","main","strokeWidth","zoom","setBounds","geoObjects","add","events","geometry","setCoordinates","getZoom","center","getCenter","query","load","Backdrop","CircularProgress","instanceRef","onLoad","suppressMapOpenBlock","defaultState","centroid_lat","centroid_lon","marginTop","locationPath","setTitle","handleModalOpen","fields","component","TypesField","exact","PriceField","MapField","curField","find","fieldProps","curIndex","nextField","NextButton","permissionListener","widgetMessage","split","result","object","permissions_granted","getFieldValues","addEventListener","removeEventListener","subscribe","Widgets","askGroupAppPermissions","size","Done","align","paragraph","href","tableContainer","paddingBottom","rightBtnContainer","fvs","Table","TableBody","TableRow","TableCell","price","pf","Dashboard","message","setMessage","access_token","severity","Alert","Main","quizPath","modalData","setModalData","onclose","render","createMuiTheme","contrastText","typography","h1","fontSize","h2","withStyles","rootContainer","setAdmin","viewer_type","init","app_id","app_key","getCurrentUser","alert","ThemeProvider","stores","mainStore","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.64b901e4.chunk.js","sourcesContent":["/**\n *\n */\n\nconst api = {\n  /**\n   * Получение основных данных необходимы для работы приложения\n   * @param {Int} gid ид. группы\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  begin: (gid, handler) => {\n    return api.request({method: 'ok/app/begin', params: {gid: gid}, handler: handler});\n  },\n\n  /**\n   * Подписать/обновить подписку\n   * @param {Object} fieldValues ид. пользвателя\n   * @param {Object} userFields данные текущего пользователя\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  apply: (fieldValues, userFields, handler) => {\n    const params = api.getParams();\n\n    // Ид. пользователя уже передается в параметре logged_user_id\n    delete userFields.uid;\n\n    return api.request({\n        method: 'ok/app/subscribe',\n        params: {\n          gid: params.group_id,\n          userFields: JSON.stringify(userFields),\n          fieldValues: JSON.stringify(fieldValues)\n        },\n        handler: handler\n      });\n  },\n\n  /**\n   * Деактивировать отправку\n   * @param {Int} gid ид. группы\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  disable: (gid, handler) => {\n    return api.request({method: 'ok/app/disable', params: {gid: gid}, handler: handler});\n  },\n\n  /**\n   * Активировать отправку\n   * @param {Int} gid ид. группы\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  enable: (gid, handler) => {\n    return api.request({method: 'ok/app/enable', params: {gid: gid}, handler: handler});\n  }\n};\n\nexport default api;\n","/**\n *  Методы панели управления\n */\n\nconst api = {dash: {\n  /**\n   * Обновить токен группы\n   * @param {String} token\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  updateToken: (token, handler) => {\n    const params = api.getParams();\n\n    return api.request({\n        method: 'ok/dash/update-token',\n        params: {\n          gid: params.group_id,\n          token: token\n        },\n        handler: handler\n      });\n  }\n}};\n\nexport default api;\n","/**\n * Работа с сервером\n */\nimport app from './app';\nimport dash from './dash';\n\nconst config = {\n  domain: window.location.host !== 'orlove.github.io' ? 'https://local.api.hozya.ru' :\n                                                        'https://api.hozya.ru'\n};\n\nvar api = {\n  /**\n   * Параметры проверки подписи\n   * @return {String} logged_user_id=..&session_key=..&auth_sig=..\n   */\n  sigParams: () => {\n    const ps = [\"logged_user_id\", \"session_key\", \"auth_sig\"],\n          params = api.getParams();\n\n    return Object.keys(params)\n      .filter(v => ps.indexOf(v) !== -1)\n      .map((k) => encodeURIComponent(k) + \"=\" + encodeURIComponent(params[k]))\n      .join('&');\n  },\n  /**\n   * Запомнить/обновить url-параметры запуска\n   */\n  updateParams: () => {\n    if(window.location.search.length > 1) {\n      sessionStorage.setItem('launch-parameters', window.location.search.substr(1));\n    }\n  },\n  /**\n   * Получить url-параметры запуска\n   * @return {Object}\n   */\n  getParams: () => {\n    const search = sessionStorage.getItem('launch-parameters') || '';\n\n    if(search.length > 0) {\n      return JSON.parse (\n        '{\"' + search.replace(/&/g, '\",\"').replace(/=/g,'\":\"') + '\"}',\n        (key, value) => key === \"\" ? value : decodeURIComponent(value)\n      );\n    } else {\n      return '';\n    }\n  },\n  /**\n   * Запрос данных с сервера\n   * @param  {String}   method  api-метод\n   * @param  {Object}   params  параметры api-метода\n   * @param  {mix}      tag     ключ запроса (для возможности его отмены)\n   * @param  {Function} handler обработчик ответа в случае успеха\n   * @param  {Object}   options доп. опции http-запроса (заголовки, метод и т.д.)\n   */\n  request: function ({method, params, tag, handler, options}) {\n\n    // Отменяем предыдущий ещё не завершенный запрос\n    if(tag) {\n      fetch.abort(tag);\n    }\n\n    let urlParams = api.sigParams();\n\n    // Преобразуем в url\n    if(params) {\n      params = Object.keys(params).map((k) =>\n          encodeURIComponent(k) + '=' + encodeURIComponent(params[k])\n      ).join('&');\n      urlParams = params + '&' + urlParams;\n    }\n\n    return fetch(config.domain+'/'+method+'?'+urlParams, options, tag)\n      .then((response) => {\n        if(response.ok) {\n          return response.json();\n        } else {\n          response.text().then((text) => {\n            console.error(response.url, text.substr(-64), response);\n          });\n          return false;\n        }\n      })\n      .then(handler)\n      .catch((error) => {\n        console.error(error);\n        //this.setState({error: error, isLoading: false});\n      });\n  },\n  /**\n   * POST-запросы\n   * @param  {String}   method  api-метод\n   * @param  {Object}   body    тело запроса\n   * @param  {Object}   params  параметры api-метода\n   * @param  {mix}      tag     ключ запроса (для возможности его отмены)\n   * @param  {Function} handler обработчик ответа в случае успеха\n   * @param  {Object}   options доп. опции http-запроса (заголовки, метод и т.д.)\n   */\n  post: function ({method, body, params, tag, handler, options}) {\n\n    // Отменяем предыдущий ещё не завершенный запрос\n    if(tag) {\n      fetch.abort(tag);\n    }\n\n    options = Object.assign({\n      method: 'POST',\n      /*headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },*/\n      body: JSON.stringify(body)\n    }, options || {});\n\n    let urlParams = api.sigParams();\n\n    // Преобразуем в url\n    if(params) {\n      params = Object.keys(params).map((k) =>\n          encodeURIComponent(k) + '=' + encodeURIComponent(params[k])\n      ).join('&');\n      urlParams = params + '&' + urlParams;\n    }\n\n    return fetch(config.domain+'/'+method+'?'+urlParams, options, tag)\n      .then((response) => {\n        if(response.ok) {\n          return response.json();\n        } else {\n          response.text().then((text) => {\n            console.error(response.url, text.substr(-64), response);\n          });\n          return false;\n        }\n      })\n      .then(handler)\n      .catch((error) => {\n        console.error(error);\n        //this.setState({error: error, isLoading: false});\n      });\n  },\n  /**\n   * Отменяет запрос с ключем tag\n   * @param {mix} tag ключ запроса\n   */\n  abort: (tag) => {\n    fetch.abort(tag);\n  }\n};\n\n// Сливаем каждый компонент с api\n[app, dash].forEach((a) => {\n  api = Object.assign(a, api);\n});\n\nexport default api;\n","/**\n *\n */\n\nimport { observable, action, decorate } from \"mobx\";\nimport Api from '../api/Api';\n\nclass AppStore {\n\n  /**\n   * Признак инициализированности\n   * @type {Boolean}\n   */\n  inited = false;\n\n  /**\n   * Данные текущего города\n   * @type {Object}\n   */\n  city = null;\n\n  /**\n   * Значения полей фильтра\n   * @type {Object}\n   */\n  fieldValues = {};\n\n  /**\n   * Флаг существования подписки (уже подписан/подписовался)\n   * @type {Boolean}\n   */\n  exists = null;\n\n  /**\n   * Флаг отключенности рассылки\n   * @type {Boolean}\n   */\n  disabled = null;\n\n  /**\n   * Данные пользователя (uid, name)\n   * @type {Object}\n   */\n  userFields = {};\n\n  /**\n   * Получение данных с сервера, необходимы для работы приложения\n   * @param {Int} gid ид. группы\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  begin(gid, handler) {\n    Api.begin(gid, (response) => {\n      this.city = response.city;\n\n      if(response.fieldValues) {\n        this.fieldValues = response.fieldValues;\n      }\n\n      this.exists = response.exists === true;\n\n      this.disabled = response.disabled === true;\n\n      this.inited = true;\n\n      handler(this.exists);\n    });\n  }\n\n  /**\n   * Деактивировать отправку\n   */\n  disable(gid) {\n    const params = Api.getParams();\n\n    Api.disable(params.group_id, (response) => {\n      if(response) {\n        this.disabled = true;\n      }\n    });\n  }\n\n  /**\n   * Активировать отправку\n   */\n  enable(gid) {\n    const params = Api.getParams();\n\n    Api.enable(params.group_id, (response) => {\n      if(response) {\n        this.disabled = false;\n      }\n    });\n  }\n\n  /**\n   * Получает данные пользователя (api Одноклассников)\n   */\n  getCurrentUser() {\n    window.OKSDK.REST.call(\n      'users.getCurrentUser',\n      {\"fields\": \"NAME,PIC190X190\"},\n      (status, data, error) => {\n        if (status === \"ok\") {\n            this.userFields = data;\n        }\n\n        if (status === \"error\") {\n            console.log(\"Error: \" + JSON.stringify(error));\n        }\n      }\n    );\n  }\n\n  /**\n   * Устанавить значение поля\n   * @param {String}  fieldName имя поля\n   * @param {any}     value     значение поля\n   */\n  setFieldValue(fieldName, value) {\n    this.fieldValues[fieldName] = value;\n  }\n\n  /**\n   * Получить значение поля\n   * @param {String}  fieldName     имя поля\n   * @param {any}     defaultValue  значение поля по умолчанию\n   */\n  getFieldValue(fieldName, defaultValue) {\n    if(this.fieldValues[fieldName] !== undefined) {\n      return this.fieldValues[fieldName];\n    } else {\n      return defaultValue;\n    }\n  }\n\n  /**\n   * Получить значение всех полей\n   */\n  getFieldValues() {\n    return this.fieldValues;\n  }\n}\n\ndecorate(AppStore, {\n  disabled: observable,\n  inited: observable,\n  begin: action\n});\n\nexport default AppStore;\n","import AppStore from \"./AppStore\";\n\nclass mainStore {\n  constructor() {\n    /**\n     * Инициализация дочерних хранилищ\n     */\n    this.AppStore = new AppStore();\n  }\n}\n\nexport default new mainStore();\n","/**\n * Вспомогательные фонкции\n */\n\nexport default {\n  /**\n   * Дополняет ссылку (добавляя префикс пути и параметры)\n   * @param  {String} path\n   * @return {String}\n   */\n  url: (path) => {\n    return \"/okapp\" + path + window.location.search;\n  },\n\n  /**\n   * Дополняет ссылку (только параметрами)\n   * @param  {String} path\n   * @return {String}\n   */\n  urlParams: (path) => {\n    return path + window.location.search;\n  },\n\n  /**\n   * Дополняет путь\n   * @param  {String} path\n   * @return {String}\n   */\n  path: (path) => {\n    return \"/okapp\" + path;\n  },\n\n  /**\n   * Добавляет прозрачность к цвету\n   * @param  {String}   hex\n   * @param  {Integer}  opacity 0 - 100\n   * @return {String}\n   */\n  hexToRGBA: (hex, opacity) => {\n    const tempHex = hex.replace('#', '');\n    const r = parseInt(tempHex.substring(0, 2), 16);\n    const g = parseInt(tempHex.substring(2, 4), 16);\n    const b = parseInt(tempHex.substring(4, 6), 16);\n\n    return `rgba(${r},${g},${b},${opacity / 100})`;\n  }\n};\n\n/**\n * Форматирование цен\n * priceFormatter.format(price)\n * @type {Intl}\n */\nexport const priceFormatter = new Intl.NumberFormat('ru-RU', {\n  style: 'currency',\n  currency: 'RUB',\n  minimumFractionDigits: 0\n});\n","import React from 'react';\nimport { useHistory, useLocation, matchPath } from 'react-router-dom';\nimport helper from '../core/helper';\nimport { Typography, Button } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n\tcontainer: {\n\t\tdisplay: 'flex'\n\t},\n\theader: {\n\t\tflex: 'auto'\n\t},\n  adminLink: {\n    float: 'right'\n  }\n}));\n\nconst Header = ({ title, admin }) => {\n\n\tconst classes = useStyles();\n\n\tconst history = useHistory(),\n\t\t\t\tlocation = useLocation();\n\n\treturn (\n\t\t<div className={classes.container}>\n      <Typography variant=\"h1\" gutterBottom className={classes.header}>\n        {title}\n      </Typography>\n\t\t\t{admin && !matchPath(location.pathname, {path: '/*/dashboard'}) && <Button onClick={() => history.push(helper.url(\"/dashboard\"))} className={classes.adminLink}>Админ</Button>}\n\t\t</div>\n\t);\n}\n\nexport default Header;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Modal, Button } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)'\n  },\n  footer: {\n    textAlign: 'right'\n  }\n}));\n\nconst SimpleModal = ({ data, handleClose }) => {\n\n  const classes = useStyles();\n\n  return (\n    <Modal\n      open={data.open}\n      onClose={handleClose}\n      aria-labelledby=\"simple-modal-title\"\n      aria-describedby=\"simple-modal-description\"\n    >\n      <div className={classes.paper}>\n        {data.title && <h2 id=\"simple-modal-title\">{data.title}</h2>}\n        {data.body && <p id=\"simple-modal-description\">\n          {data.body}\n        </p>}\n        <div className={classes.footer}>\n          <Button onClick={handleClose}>ОК</Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default SimpleModal;\n","import React from 'react'\nimport { inject } from 'mobx-react';\nimport { styled, withTheme } from '@material-ui/core/styles';\nimport { Grid, Typography, Button, Checkbox } from '@material-ui/core';\nimport Api from '../../core/api/Api';\n\nconst TypeField = ({ theme, AppStore }) => {\n\n\tconst STButton = styled(Button)({\n\t\t// Кнопки во всю ширену ячеек\n\t  width: '100%',\n\n\t\t// Чекбоксы слева текст по середине\n\t\tjustifyContent: 'left',\n\t\t'& .MuiButton-label__text': {\n\t\t\tdisplay: 'block',\n\t\t\twidth: '100%'\n\t\t},\n\n\t\t// Стиль выбранной кнопки\n\t\t'&.Mui-selected': {\n\t\t\tbackgroundColor: theme.palette.grey[300],\n\t\t\t//color: theme.palette.default.contrastText\n\t\t}\n\t});\n\n\tconst [types, setTypes] = React.useState(AppStore.getFieldValue('types', 0));\n\n  // Обработчик изменения состояния checkbox'ов\n  const handleCbs = (event, bit) => {\n\t\tbit = Number(bit);\n\t\tconst newTypes = types + (types & bit ? -bit : bit);\n    setTypes(newTypes);\n\t\tAppStore.setFieldValue('types', newTypes);\n  };\n\n  // Обработчик клика по кнопке в которой находится checkbox\n\tconst clickBnts = (event, bit) => {\n\t\tif(event.target.tagName !== 'INPUT') {\n\t\t\tbit = Number(bit);\n\t\t\tconst newTypes = types + (types & bit ? -bit : bit);\n\t    setTypes(newTypes);\n\t\t\tAppStore.setFieldValue('types', newTypes);\n\t\t}\n\t};\n\n\tconst typeSet = {2: 'Комнату', 64: '1 комн.', 128: '2 комн.', 256: '3 комн.', 512: '4 комн.+', 4: 'Дом'};\n\n\treturn (\n    <Grid container>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h2\" gutterBottom>Какое жильё ищите?</Typography>\n\t\t\t</Grid>\n      <Grid item xs={12}>\n        <Grid container spacing={2}>\n  \t\t\t\t{Object.entries(typeSet).map(([bit, label]) => (\n            <Grid item xs={6} key={bit}>\n              <STButton variant=\"outlined\" onClick={(e) => clickBnts(e, bit)} className={(types & bit) ? 'Mui-selected' : ''}>\n                <Checkbox checked={types & bit} onChange={(e, v) => handleCbs(e, bit)} color=\"primary\" />\n\t\t\t\t\t\t\t\t<span className=\"MuiButton-label__text\">{label}</span>\n              </STButton>\n            </Grid>\n  \t\t\t\t))}\n        </Grid>\n      </Grid>\n      {/*<Grid item xs={12}>\n        <p style={{overflowWrap: 'break-word'}}>{JSON.stringify(Api.getParams().group_id)}</p>\n      </Grid>*/}\n    </Grid>\n\t);\n}\n\nexport default withTheme(inject(\"AppStore\")(TypeField));\n","import React from 'react'\nimport { inject } from 'mobx-react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Grid, Typography, FormControl, Select, MenuItem } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    //margin: theme.spacing(3),\n  \twidth: '100%'\n  }\n}));\n\nconst PriceField = ({ AppStore }) => {\n\n\tconst classes = useStyles();\n\tconst [state, setState] = React.useState(AppStore.getFieldValue('price', {\n    from: 0,\n\t\tto: 0\n  }));\n\n\tlet sequence = [3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,16000,17000,18000,19000,20000,21000,23000,25000,27000];\n\n\t// В МСК и СПБ цены выше\n\tif(true) {\n\t\tsequence = sequence.concat([30000, 33000, 35000, 37000, 43000, 45000, 47000, 50000, 53000, 55000, 57000]);\n\t}\n\n\tconst formatter = new Intl.NumberFormat('ru-RU', {\n\t  style: 'currency',\n\t  currency: 'rub',\n\t\tmaximumSignificantDigits: 3\n\t});\n\n\tconst handleChange = (event) => {\n    const name = event.target.name;\n    setState({\n      ...state,\n      [name]: event.target.value,\n    });\n  };\n\n  React.useEffect(() => {\n    AppStore.setFieldValue('price', state);\n  }, [state]);\n\n\treturn (\n    <Grid container>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Typography variant=\"h2\" gutterBottom>Какую цену рассматриваете?</Typography>\n\t\t\t</Grid>\n      <Grid item xs={12}>\n        <Grid container spacing={2}>\n          <Grid item xs={6}>\n\t\t\t\t\t\t<FormControl variant=\"outlined\" className={classes.formControl}>\n\t\t\t\t\t\t\t<Select\n\t\t\t          value={state.from}\n\t\t\t          onChange={handleChange}\n\t\t\t          inputProps={{name: 'from'}}\n\t\t\t        >\n\t\t\t          <MenuItem value=\"0\">От любой</MenuItem>\n\t\t\t\t\t\t\t\t{sequence.filter(v => state.to > v || state.to === 0).map((v, i) => <MenuItem value={v} key={i}>{'От '+formatter.format(v)}</MenuItem>)}\n\t\t\t        </Select>\n\t\t\t\t\t\t</FormControl>\n          </Grid>\n\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t<FormControl variant=\"outlined\" className={classes.formControl}>\n\t\t\t\t\t\t\t<Select\n\t\t\t          value={state.to}\n\t\t\t          onChange={handleChange}\n\t\t\t          inputProps={{name: 'to'}}\n\t\t\t        >\n\t\t\t          <MenuItem value=\"0\">До любой</MenuItem>\n\t\t\t\t\t\t\t\t{sequence.filter(v => state.from < v).map((v, i) => <MenuItem value={v} key={i}>{'До '+formatter.format(v)}</MenuItem>)}\n\t\t\t        </Select>\n\t\t\t\t\t\t</FormControl>\n          </Grid>\n        </Grid>\n      </Grid>\n      {/*<Grid item xs={12}>\n        <p>{JSON.stringify(state)}</p>\n      </Grid>*/}\n    </Grid>\n\t);\n}\n\nexport default inject(\"AppStore\")(PriceField);\n","import React from 'react'\nimport { observer, inject } from 'mobx-react';\nimport helper from '../../core/helper';\nimport { YMaps, Map } from 'react-yandex-maps';\nimport { makeStyles, withTheme } from '@material-ui/core/styles';\nimport { Typography, Backdrop, CircularProgress } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n  mapContainer: {\n    height: (window.innerHeight - 150)+'px',\n    width: '100%'\n  }\n}));\n\nconst MapField = ({ theme, AppStore }) => {\n\n\tconst [state, setState] = React.useState({\n    mapIsLoaded: false,\n    map: null,\n    ymaps: null,\n    rectangle: null\n  });\n\n  const classes = useStyles();\n\n  React.useEffect(() => {\n    if(state.map && state.ymaps && !state.rectangle) {\n\n      const mapFieldValues = AppStore.getFieldValue('map', {bounds: state.map.getBounds()});\n\n      // Создаем прямоугольник выбранной области\n      const rectangle = new state.ymaps.Rectangle(mapFieldValues.bounds, {}, {\n          fill: false,\n          coordRendering: \"boundsPath\",\n          strokeColor: helper.hexToRGBA(theme.palette.primary.main, 70),\n          strokeWidth: 4\n      });\n\n      if(mapFieldValues.zoom === undefined && mapFieldValues.bounds) {\n        state.map.setBounds(mapFieldValues.bounds);\n      }\n\n      state.map.geoObjects.add(rectangle);\n      setState({...state, rectangle: rectangle});\n\n      // Вешаем отслеживание перемещения\n      state.map.events.add('boundschange', (e) => {\n        const bounds = state.map.getBounds();\n        rectangle.geometry.setCoordinates(bounds);\n        /*document.querySelector('input[name=\"west\"]').value = bounds[0][0];\n        document.querySelector('input[name=\"south\"]').value = bounds[0][1];\n        document.querySelector('input[name=\"east\"]').value = bounds[1][0];\n        document.querySelector('input[name=\"north\"]').value = bounds[1][1];*/\n\n        AppStore.setFieldValue('map', {bounds: bounds, zoom: state.map.getZoom(), center: state.map.getCenter()});\n      });\n    }\n  });\n\n  // Получение объекта карты\n  const instanceRef = (map) => {\n    if(map && !state.map) {\n      setState({...state, map: map});\n    }\n  };\n\n  // Получение объекта для работы с api\n  const handleOnLoad = (ymaps) => {\n    if(ymaps && !state.mapIsLoaded) {\n      setState({...state, mapIsLoaded: true, ymaps: ymaps});\n    }\n  }\n\n\treturn (\n    <YMaps query={{\n      // Подключение нужных модулей\n      load: [\"Rectangle\"]\n    }}>\n      <Backdrop className={classes.backdrop} open={!state.mapIsLoaded}><CircularProgress color=\"inherit\" /></Backdrop>\n      <Typography variant=\"h5\" gutterBottom>Приблизьте к нужному району</Typography>\n      <Map\n        instanceRef={instanceRef}\n        onLoad={handleOnLoad}\n        options={{\n          // Прячем кнопку \"открыть в яндекс.картах\"\n          suppressMapOpenBlock: true\n        }}\n        defaultState={!AppStore.city.centroid_lat ? {} : {\n          center: AppStore.getFieldValue('map', {}).center || [AppStore.city.centroid_lat, AppStore.city.centroid_lon],\n          zoom: AppStore.getFieldValue('map', {}).zoom || 9\n        }}\n        className={classes.mapContainer}\n      />\n      {/*<p id=\"ere\">{JSON.stringify(AppStore.fieldValues)}</p>*/}\n    </YMaps>\n\t);\n}\n\nexport default withTheme(inject(\"AppStore\")(observer(MapField)));\n","import React, { useEffect } from 'react';\nimport { inject } from 'mobx-react';\nimport { Switch, Route, useHistory, useLocation, matchPath } from 'react-router-dom';\nimport helper from '../core/helper';\nimport { Grid, Button } from '@material-ui/core';\nimport { styled, withTheme, makeStyles } from '@material-ui/core/styles';\nimport Api from '../core/api/Api';\n\nimport TypesField from './fields/TypesField';\nimport PriceField from './fields/PriceField';\nimport MapField from './fields/MapField';\n\nconst useStyles = makeStyles((theme) => ({\n  footer: {\n    marginTop: '20px'\n  }\n}));\n\nconst Quiz = ({ theme, locationPath, setTitle, handleModalOpen, AppStore }) => {\n\n  const classes = useStyles();\n\n\tconst fields = [\n\t\t{component: TypesField, key: 'types', exact: true, path: locationPath},\n\t\t{component: PriceField, key: 'price', path: locationPath + '/price'},\n\t\t{component: MapField, key: 'map', path: locationPath + '/map'}\n\t];\n\n\tconst history = useHistory(),\n\t\t\t\tlocation = useLocation();\n\n\tconst curField = fields.find(fieldProps => matchPath(location.pathname, fieldProps)),\n\t\t\t\tcurIndex = fields.indexOf(curField),\n\t\t\t\tnextField = fields.length - 1 > curIndex ? fields[curIndex + 1] : null;\n\n  useEffect(() => {\n    setTitle((curIndex + 1) + ' из ' + fields.length);\n  }, [curIndex]);\n\n\tconst NextButton = styled(Button)({\n\t\tfloat: 'right'\n\t});\n\n  const permissionListener = (widgetMessage) => {\n\n    if(widgetMessage.data && widgetMessage.data.substring(0, 20) === 'showGroupPermissions') {\n\n      const [, result, object] = widgetMessage.data.split('$');\n      console.log('widgetMessage.data', widgetMessage.data);\n      if(result === 'ok') {\n        const data = JSON.parse(object);\n\n        // Разрешение получено\n        if(data.permissions_granted === 'MESSAGES_FROM_GROUP') {\n          Api.apply(AppStore.getFieldValues(), AppStore.userFields, (result) => {\n            if(result) {\n              if(AppStore.exists) {\n                history.push(helper.url('/view'));\n              } else {\n                history.push(helper.url('/done'));\n              }\n              AppStore.exists = true;\n              AppStore.disabled = false;\n            } else {\n              handleModalOpen(null, 'Вы ничего не поменяли.', () => history.push(helper.url('/view')));\n            }\n          });\n          return;\n        }\n      }\n\n      // НЕ получено\n      handleModalOpen(null, 'Пожалуйста, дайте разрешения на отправку сообщений, чтобы мы могли прислать вам варианты.');\n    }\n  };\n\n  React.useEffect(() => {\n    window.addEventListener('message', permissionListener, false);\n    return () => window.removeEventListener('message', permissionListener);\n  }, []);\n\n  // Подписка на отправку подходящих вариантов\n  const subscribe = () => {\n    // Запрос разрешения сообщений от группы доступен только в устаревшем SDK\n    window.OKSDK.Widgets.askGroupAppPermissions('MESSAGES_FROM_GROUP');\n  };\n\n  // К следующему полю\n  const next = () => {\n    history.push(helper.urlParams(nextField.path))\n  };\n\n\treturn (\n\t\t<div>\n\t\t\t<Switch>\n\t\t\t\t{fields.map(fieldProps => <Route {...fieldProps} />)}\n\t    </Switch>\n\t\t\t<Grid container className={classes.footer}>\n\t\t\t\t<Grid item xs={3}>\n\t\t\t\t\t{curIndex > 0 && <Button size=\"large\" color=\"default\" variant=\"contained\" onClick={() => history.push(helper.urlParams(fields[curIndex-1].path))}>Назад</Button>}\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={9}>\n\t\t\t\t\t{nextField &&\n            <NextButton\n              size=\"large\"\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={next}\n            >\n              Далее\n          </NextButton>}\n\n          {/* Ещё не подписан */}\n          {!nextField && !AppStore.exists &&\n            <NextButton size=\"large\" color=\"primary\" variant=\"contained\" onClick={subscribe}>Прислать объявления от собственников</NextButton>}\n\n          {/* Подписан и подписка активированна */}\n          {!nextField && AppStore.exists && !AppStore.disabled &&\n            <NextButton size=\"large\" color=\"primary\" variant=\"contained\" onClick={subscribe}>ОК</NextButton>}\n\n          {/* Подписан но подписка не активированна */}\n          {!nextField && AppStore.exists && AppStore.disabled &&\n            <NextButton size=\"large\" color=\"primary\" variant=\"contained\" onClick={subscribe}>Применить</NextButton>}\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</div>\n\t);\n}\n\nexport default withTheme(inject(\"AppStore\")(Quiz));\n","import React, { useEffect } from 'react'\nimport { Button, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n\t\tpadding: theme.spacing(2)\n\t}\n}));\n\nconst Done = ({ setTitle }) => {\n\n\tuseEffect(() => {\n\t\tsetTitle('Готово!');\n\t}, []);\n\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t<Typography align=\"justify\" paragraph>\n\t\t\t\tВ течении нескольких минут вам придут объявления от собственников.\n\t\t\t\tСвежие объявления отправляются по мере поступления. Вы не пропустите ни одного!\n\t\t\t</Typography>\n\t\t\t<Button variant=\"contained\" onClick={() => window.location.href = 'https://ok.ru/messages'}>Перейти к сообщениям</Button>\n\t\t</div>\n\t);\n}\n\nexport default Done;\n","import React, { useEffect } from 'react'\nimport { inject, observer } from 'mobx-react';\nimport { useHistory } from 'react-router-dom';\nimport helper from '../core/helper';\nimport { Button, Grid, Table, TableBody, TableCell, TableRow } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { priceFormatter as pf } from '../core/helper';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n\t\tpadding: theme.spacing(2)\n\t},\n  tableContainer: {\n    paddingBottom: theme.spacing(4)\n  },\n  rightBtnContainer: {\n    textAlign: 'right'\n  }\n}));\n\nconst SubscribeView = ({ setTitle, AppStore }) => {\n\n\tuseEffect(() => {\n\t\tsetTitle('Параметры интересующего жилья');\n\t}, []);\n\n\tconst classes = useStyles();\n\n  const history = useHistory();\n\n  const typeSet = {2: 'комната', 64: 'однокомнатная', 128: 'двухкомнатная', 256: 'трёхкомнатная', 512: 'четырехкомнатная+', 4: 'Дом'};\n\n  const fvs = AppStore.getFieldValues();\n\n  /** Остановить отправку */\n  const disable = () => {\n    AppStore.disable();\n  };\n\n  /** Активировать отправку */\n  const enable = () => {\n    AppStore.enable();\n  };\n\n\treturn (\n    <Grid container>\n      <Grid item xs={12} className={classes.tableContainer}>\n        <Table>\n          <TableBody>\n            <TableRow>\n              <TableCell>\n                Тип жилья\n              </TableCell>\n              <TableCell>\n                {Object.entries(typeSet).map(([bit, label]) => fvs.types & bit ? label : null).filter(v => v !== null).join(', ')}\n              </TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>\n                Цена\n              </TableCell>\n              <TableCell>\n                {fvs.price.to > 0 && fvs.price.from > 0 &&\n                  `от ${pf.format(fvs.price.from).substr(0, pf.format(fvs.price.from).length - 1)} до ${pf.format(fvs.price.to)}`}\n                {fvs.price.to === 0 && fvs.price.from > 0 && `от ${pf.format(fvs.price.from)}`}\n                {fvs.price.to > 0 && fvs.price.from === 0 && `до ${pf.format(fvs.price.to)}`}\n              </TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell>\n                Местоположение\n              </TableCell>\n              <TableCell>\n                {fvs.map ? 'выбрана область на карте' : 'весь город'}\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </Grid>\n      <Grid item xs={5}>\n        <Button size=\"large\" variant=\"contained\" onClick={() => history.push(helper.url('/quiz'))}>Изменить параметры</Button>\n      </Grid>\n      <Grid item xs={7} className={classes.rightBtnContainer}>\n        {!AppStore.disabled && <Button size=\"large\" variant=\"contained\" onClick={disable}>Остановить отправку вариантов</Button>}\n        {AppStore.disabled && <Button size=\"large\" variant=\"contained\" color=\"primary\" onClick={enable}>Прислать объявления от хозяев</Button>}\n      </Grid>\n    </Grid>\n\t);\n}\n\nexport default inject(\"AppStore\")(observer(SubscribeView));\n","import React from 'react';\nimport { Button } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\n\nimport Api from '../core/api/Api';\n\nconst Dashboard = ({ setTitle }) => {\n\n\t// Similar to componentDidMount and componentDidUpdate:\n\tReact.useEffect(() => {\n\t\tsetTitle('Панель управления');\n\t}, []);\n\n\tconst [message, setMessage] = React.useState(false);\n\n\tconst getUpdateToken = () => {\n\t\twindow.OKSDK.Widgets.askGroupAppPermissions('GROUP_BOT_API_TOKEN');\n\t};\n\n\tReact.useEffect(() => {\n    window.addEventListener('message', permissionListener, false);\n    return () => window.removeEventListener('message', permissionListener);\n  }, []);\n\n\t// Получает разрешение/отказ отправки сообщений\n\tconst permissionListener = (widgetMessage) => {\n\t\tif(widgetMessage.data && widgetMessage.data.substring(0, 24) === 'showGroupPermissions$ok$') {\n      const data = JSON.parse(widgetMessage.data.substring(24));\n\n      // Разрешение получено\n      if(data.permissions_granted === 'GROUP_BOT_API_TOKEN') {\n        Api.dash.updateToken(data.access_token, (result) => {\n          if(result.error) {\n\t\t\t\t\t\tsetMessage({severity: 'error', text: result.error});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetMessage({severity: 'success', text: 'Токен успешно обновлён'});\n\t\t\t\t\t}\n        });\n      }\n    }\n  };\n\n\treturn (\n\t\t<div>\n\t\t\t<Button variant=\"contained\" onClick={() => getUpdateToken()}>Получить/обновить токен</Button>\n\t\t\t{message && <Alert severity={message.severity}>{message.text}</Alert>}\n\t\t</div>\n\t);\n}\n\nexport default Dashboard;\n","import React from 'react';\nimport helper from '../core/helper';\nimport { Switch, Route } from 'react-router-dom';\n\nimport SimpleModal from '../components/SimpleModal';\n\nimport Quiz from '../pages/Quiz';\nimport Done from '../pages/Done';\nimport SubscribeView from '../pages/SubscribeView';\nimport Dashboard from '../pages/Dashboard';\n\nconst Main = ({ setTitle, admin }) => {\n\n\tconst quizPath = helper.path('/quiz');\n\n\t// Состояние и методы модального окна\n  const [modalData, setModalData] = React.useState({open: false}),\n\t\t\t\thandleModalOpen = (title, body, onclose) => setModalData({open: true, title: title, body: body, onclose: onclose}),\n\t\t\t\thandleModalClose = () => {\n\t\t\t\t\tif(modalData) {\n\t\t\t\t\t\tmodalData.onclose();\n\t\t\t\t\t}\n\t\t\t\t\tsetModalData({open: false});\n\t\t\t\t};\n\n\treturn (\n\t\t<div>\n\t    <Switch>\n\t      <Route\n\t\t\t\t\tpath={quizPath}\n\t\t\t\t\trender={() => {return <Quiz setTitle={setTitle} locationPath={quizPath} handleModalOpen={handleModalOpen} />}}\n\t\t\t\t/>\n\t\t\t\t<Route path={helper.path('/done')} render={() => {return <Done setTitle={setTitle} />}} />\n\t\t\t\t<Route path={helper.path('/view')} render={() => {return <SubscribeView setTitle={setTitle} />}} />\n\t\t\t\t{admin && <Route exact path={helper.path('/dashboard')} render={() => {return <Dashboard setTitle={setTitle} />}} />}\n\t    </Switch>\n\t\t\t{/* Модальное окно */}\n\t\t\t<SimpleModal data={modalData} handleClose={handleModalClose} />\n\t\t</div>\n\t);\n}\n\nexport default Main;\n","import React, { useState } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { useHistory } from 'react-router-dom';\nimport helper from './core/helper';\nimport { Backdrop, CircularProgress } from '@material-ui/core';\nimport { createMuiTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\n\nimport Api from './core/api/Api';\n\nimport Header from './components/Header';\nimport Main from './components/Main';\n\n// Изменение стилей темы\nconst theme = createMuiTheme({\n  // Основные цвета\n  palette: {\n    primary: {\n\t\t\tmain: '#ee8208',\n\t\t\tcontrastText: '#fff'\n\t\t}\n  },\n  // Оформление текста\n  typography: {\n    h1: {\n      fontSize: '28px'\n    },\n    h2: {\n      fontSize: '24px'\n    }\n  }\n});\n\nconst styles = (theme) => {\n  return {\n    rootContainer: {\n      padding: '8px'\n    },\n    backdrop: {\n      zIndex: theme.zIndex.drawer + 1,\n      color: '#fff',\n    }\n  }\n};\n\nconst App = ({ AppStore, classes }) => {\n\n  const history = useHistory();\n\n\tconst [title, setTitle] = useState(null);\n\n  // Признак администратора группы\n  const [admin, setAdmin] = React.useState(false);\n\tReact.useEffect(() => {\n\t\tif(Api.getParams().viewer_type === 'ADMIN') {\n\t\t\tsetAdmin(true);\n\t\t}\n\t}, []);\n\n  React.useEffect(() => {\n    // Запоминаем пераметры запуска приложения\n\t\tApi.updateParams();\n\n    const params = Api.getParams();\n\n    // Не задан параметр group_id, отменяем дальнейшие действия\n    if(!params.group_id) {\n      return;\n    }\n\n\t\t// Получение данных с сервера, необходимы для работы приложения\n\t\tAppStore.begin(params.group_id, (exists) => {\n      // Если пудписка уже существует\n      if(exists) {\n        // Переходим к просмотру\n        history.push(helper.url('/view'));\n      }\n      // Подписки ещё нет\n      else {\n        // Переходим к форме\n        history.push(helper.url('/quiz'));\n      }\n    });\n\n     // Инициализация API\n     window.OKSDK.init(\n       {app_id: 512000691802, app_key: 'CLFPIPJGDIHBABABA'},\n       // Success\n       () => {\n         // Получает данные пользователя (api Одноклассников)\n         AppStore.getCurrentUser();\n       },\n       // Error\n       (error) => alert(\"Ошибка инициализации SDK\")\n     );\n  }, []);\n\n\treturn (\n\t\t<ThemeProvider theme={theme}>\n      <Backdrop className={classes.backdrop} open={!AppStore.inited}><CircularProgress color=\"inherit\" /></Backdrop>\n      {AppStore.inited && <div className={classes.rootContainer}>\n  \t\t\t<Header title={title} admin={admin} />\n  \t    <Main setTitle={setTitle} admin={admin} />\n      </div>}\n\t\t</ThemeProvider>\n\t);\n}\n\nexport default withStyles(styles)(inject(\"AppStore\")(observer(App)));\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from \"mobx-react\";\nimport mainStore from './core/stores/mainStore';\nimport App from \"./App\";\n\nconst stores = {\n    mainStore,\n    AppStore : mainStore.AppStore\n};\n\nReactDOM.render(\n  <Provider {...stores}>\n    <BrowserRouter>\n      <App/>\n    </BrowserRouter>\n  </Provider>, document.getElementById(\"root\"));\n\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}